<div class="page2">
    <div ng-if="mode==1">
        <h2>Users</h2>
        <span class="label label-primary pull-right" ng-click="openCreateUser()">Create User</span>
        <table class="table" style="margin-top: 2em">
            <tr class="table_head">
                <th>Last</th>
                <th>First</th>
                <th>Username</th>
                <th>Email</th>
                <th>Admin</th>
                <th>User</th>
                <th>Enabled</th>
                <th>Operation</th>
            </tr>
            <tr ng-repeat="(u,user) in users">
                <td>{{user.last}}</td>
                <td>{{user.first}}</td>
                <td>{{user.username}}</td>
                <td>{{user.email}}</td>
                <td><input type="checkbox" ng-checked="hasRole( user, 'ROLE_ADMIN')"
                           ng-click="updateRole(user,'ROLE_ADMIN')"></td>
                <td><input type="checkbox" ng-checked="hasRole( user, 'ROLE_USER')"
                           ng-click="updateRole(user,'ROLE_USER')"></td>
                <td><input type="checkbox" ng-checked="user.enabled" ng-click="updateEnable(user)"></td>
                <td>
                    <button class="btn btn-default" ng-click="openChangePassword(user)">Change Password</button>
                </td>
            </tr>

        </table>
    </div>
    <div ng-if="mode==2">
        <h4>Change password: {{currentUser.username}}</h4>
        <span class="glyphicon glyphicon-remove pull-right" ng-click="close()"> </span>
        <div class="form-group">
            <label>Password</label>
            <input type="password" class="form-control" ng-model="userUpdate.password" placeholder="Password">
        </div>
        <div class="form-group">
            <label>Confirm</label>
            <input type="password" class="form-control" ng-model="userUpdate.password2" placeholder="Password">
        </div>

        <button type="submit" class="btn btn-default" ng-click="changePassword(user)">Submit</button>
    </div>
    <div ng-if="mode==3">
        <h4>Create User</h4>
        <span class="glyphicon glyphicon-remove pull-right" ng-click="close()"> </span>
        <div class="form-group">
            <label>Username</label>
            <input type="text" class="form-control" ng-model="userCreate.username" placeholder="Username">
        </div>
        <div class="form-group">
            <label>First Name</label>
            <input type="text" class="form-control" ng-model="userCreate.first" placeholder="First Name">
        </div>
        <div class="form-group">
            <label>Last Name</label>
            <input type="text" class="form-control" ng-model="userCreate.last" placeholder="Last Name">
        </div>
        <div class="form-group">
            <label>Email</label>
            <input type="text" class="form-control" ng-model="userCreate.email" placeholder="Email">
        </div>
        <div class="form-group">
            <label>Password</label>
            <input type="password" class="form-control" ng-model="userCreate.password" placeholder="Password">
        </div>
        <div class="form-group">
            <label>Confirm</label>
            <input type="password" class="form-control" ng-model="userCreate.password2" placeholder="Password">
        </div>
        <div class="form-group">
            <label>Admin</label>
            <input type="checkbox" ng-click="role('ROLE_ADMIN')">
            <label>User</label>
            <input type="checkbox" ng-click="role('ROLE_USER')"></div>
        <button type="submit" class="btn btn-default" ng-click="createUser()">Submit</button>
    </div>
</div>